<!doctype html>
<html lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>一鍵填入 & 密碼產生器</title>
    <link rel="stylesheet" href="popup.css" />
</head>

<body>
    <div class="tabs">
        <button class="tab-btn active" data-tab="fill-tab">⚡ 一鍵填入</button>
        <button class="tab-btn" data-tab="gen-tab">🔑 密碼產生</button>
    </div>

    <div id="fill-tab" class="tab-content active">
        <div class="url" id="currentUrl">讀取中...</div>
        <select id="recordSelect" style="display:none"></select>
        <button id="fillBtn" class="btn-main gray" disabled>填入帳密</button>
        <div class="row">
            <button class="btn-sub light" id="detectBtn">偵測欄位</button>
            <button class="btn-sub dark" id="openOptions">開啟設定頁</button>
        </div>
        <div class="msg" id="msg"></div>
        <div class="hint" id="hint"></div>
        <div id="detectOut" style="display:none;">
            <pre id="detectJson"></pre>
        </div>
    </div>

    <div id="gen-tab" class="tab-content">
        <div class="result-box" id="gen-result">載入中...</div>
        <div class="strength-meter">
            <div id="strength-bar"></div>
        </div>
        <div class="info-row">
            <span id="strength-text">強度：-</span>
            <span id="entropy-val">熵值估算 ≈ 0 bits</span>
        </div>

        <div class="row" style="margin-bottom: 20px;">
            <button class="btn-sub light" id="gen-copy">複製</button>
            <button class="btn-sub green" id="gen-fill">自動填入頁面</button>
        </div>

        <div class="gen-settings">
            <div class="setting-item">
                <span>長度</span>
                <div class="length-control-group">
                    <input type="range" id="gen-length" min="5" max="128" value="18" title="滑動調整長度">
                    <div class="stepper">
                        <button id="len-minus" class="step-btn" type="button">−</button>
                        <span class="len-display" id="len-val">18</span>
                        <button id="len-plus" class="step-btn" type="button">+</button>
                    </div>
                </div>
            </div>
            <label class="setting-item"><span>包含大寫 (A-Z)</span>
                <div class="switch"><input type="checkbox" id="gen-upper" checked><span class="slider"></span></div>
            </label>
            <label class="setting-item"><span>包含小寫 (a-z)</span>
                <div class="switch"><input type="checkbox" id="gen-lower" checked><span class="slider"></span></div>
            </label>
            <label class="setting-item"><span>包含數字 (0-9)</span>
                <div class="switch"><input type="checkbox" id="gen-numbers" checked><span class="slider"></span></div>
            </label>
            <label class="setting-item"><span>包含符號 (!@#$)</span>
                <div class="switch"><input type="checkbox" id="gen-symbols" checked><span class="slider"></span></div>
            </label>
            <label class="setting-item"><span>強制涵蓋已選類別</span>
                <div class="switch"><input type="checkbox" id="gen-force-each" checked><span class="slider"></span>
                </div>
            </label>
            <label class="setting-item"><span>排除易混淆 (l, 1, O, 0)</span>
                <div class="switch"><input type="checkbox" id="gen-ambiguous"><span class="slider"></span></div>
            </label>
            <label class="setting-item"><span>排除程式衝突 (' " ` \ /)</span>
                <div class="switch"><input type="checkbox" id="gen-unsafe"><span class="slider"></span></div>
            </label>
        </div>

        <button class="btn-sub dark" id="gen-refresh" style="width:100%; margin-top:20px;">重新產生</button>
        <div class="msg" id="gen-msg" style="text-align:center;"></div>
    </div>

    <script type="module" src="popup.js"></script>
</body>

</html>